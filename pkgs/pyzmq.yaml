extends: [setuptools_package]
dependencies:
  build: 
    - numpy
    - cython
    - zmq

sources:
 - key: zip:qofsjfbfwfurfauaojvq5kf4nyawkwlb
   url: https://pypi.python.org/packages/source/p/pyzmq/pyzmq-14.7.0.zip

build_stages:

- name: install
  after: setup_dirs
  handler: bash
  bash: |
    # build
    LD_LIBRARY_PATH=$ZMQ_DIR/lib:$LD_LIBRARY_PATH PATH=$PATH:$ZMQ_DIR/bin $PYTHON setup.py build_ext --zmq=$ZMQ_DIR
    # install
    LD_LIBRARY_PATH=$ZMQ_DIR/lib:$LD_LIBRARY_PATH PATH=$PATH:$ZMQ_DIR/bin $PYTHON setup.py install --zmq=$ZMQ_DIR --prefix=$ARTIFACT
