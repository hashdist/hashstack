extends: [distutils_package]
dependencies:
  build: 
    - numpy
    - cython
    - zmq

sources:
  - url: https://pypi.python.org/packages/source/p/pyzmq/pyzmq-14.3.1.tar.gz
    key: tar.gz:adrghqtkkjhycetsi7tpg7f7ij7n345d

build_stages:

- name: install
  after: setup_dirs
  handler: bash
  bash: |
    # build
    LD_LIBRARY_PATH=$ZMQ_DIR/lib:$LD_LIBRARY_PATH PATH=$PATH:$ZMQ_DIR/bin $PYTHON setup.py build_ext --zmq=$ZMQ_DIR
    # install
    LD_LIBRARY_PATH=$ZMQ_DIR/lib:$LD_LIBRARY_PATH PATH=$PATH:$ZMQ_DIR/bin $PYTHON setup.py install --zmq=$ZMQ_DIR --prefix=$ARTIFACT
