extends: [setuptools_package]

dependencies:
  build: [hdf5, mpi4py, mpi, numpy, cython, pkgconfig, six]
  run: [numpy, mpi4py]

sources:
 - key: tar.gz:wkx4gvbq2xsmgq24tfxe6tvcvoq6uvqq
   url: https://pypi.python.org/packages/22/82/64dada5382a60471f85f16eb7d01cc1a9620aea855cd665609adf6fdbb0d/h5py-2.6.0.tar.gz

build_stages:
- name: build_ext_options
  mode: replace
  before: install
  handler: bash
  bash: |
       export HDF5_VERSION='1.8.16'
       export CC=${MPICC}
       export SETUPTOOLS_PACKAGE_EXTRA_OPTIONS="configure --mpi"
